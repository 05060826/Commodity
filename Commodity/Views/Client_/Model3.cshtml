
    
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <title>购物车</title>
    <style>
        table {
            border: 1px solid #e9e9e9;
            border-collapse: collapse;
            border-spacing: 0;
        }

        th, td {
            padding: 8px 16px;
            border: 1px solid #e9e9e9;
            text-align: left;
        }

        th {
            background-color: #f7f7f7;
            color: #5c6b77;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div id="app">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>书籍名称</th>
                    <th>出版日期</th>
                    <th>价格</th>
                    <th>购买数量</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="v,k in books" :key="k">
                    <td>{{v.id}}</td>
                    <td>{{v.name}}</td>
                    <td>{{v.date}}</td>
                    <td>{{v.price | rmb}}</td>
                    <td>
                        <button click="reduceCount(k)">-</button>
                        {{v.count}}
                        <button click="addCount(k)">+</button>
                    </td>
                    <td>
                        <button click="removeBook(k)">删除</button>
                    </td>
                </tr>
            </tbody>
        </table>
        <h3>总价格: {{totalPrice|rmb}}</h3>
    </div>
    @*<script src="../js/vue.js"></script>*@
    <script src="https://static.runoob.com/assets/vue/1.0.11/vue.min.js"></script>
    <script>
        const app = new Vue({
            el: "#app",
            data: {
                books: [
                    { id: 1, name: "理想国Python基础教程", date: "2019-8", price: 88.88, count: 1 },
                    { id: 2, name: "理想国Python高级教程", date: "2019-8", price: 88.88, count: 1 },
                    { id: 3, name: "理想国Python Django教程", date: "2019-8", price: 88.88, count: 1 },
                    { id: 4, name: "理想国Python Vue教程", date: "2019-8", price: 88.88, count: 1 },
                    { id: 5, name: "理想国Python 数据分析教程", date: "2019-8", price: 88.88, count: 1 },
                    { id: 6, name: "理想国Python 爬虫教程", date: "2019-8", price: 88.88, count: 1 },
                    { id: 7, name: "理想国Python 数据库教程", date: "2019-8", price: 88.88, count: 1 },
                    { id: 8, name: "理想国Python Flask教程", date: "2019-8", price: 88.88, count: 1 },
                    { id: 9, name: "理想国Python Scrapy教程", date: "2019-8", price: 88.88, count: 1 },
                    { id: 10, name: "理想国Python 自动化教程", date: "2019-8", price: 88.88, count: 1 }
                ]
            },
            methods: {
                addCount(i) {
                    this.books[i].count++
                },
                reduceCount(i) {
                    if (this.books[i].count > 0) {
                        this.books[i].count--
                    }
                },
                //从购物车删除功能
                removeBook(i) {
                    this.books.splice(i, 1)
                }
            },
            filters: {
                rmb(price) {
                    //roFixed(保留小数点后几位)
                    return "￥" + price.toFixed(2)
                }
            },
            computed: {
                totalPrice() {
                    let price = 0
                    for (let i = 0; i < this.books.length; i++) {
                        price += this.books[i].price * this.books[i].count
                    }
                    return price
                }
            }
        })
    </script>
</body>
</html>
